<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>TOMZ FOOD & DRINK</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
:root { --accent:#ee4d2d; --wa:#25D366; }
body{margin:0;background:#090909;font-family:Arial;color:#222}
.hidden{display:none!important}

.box-area{background:#000;width:360px;margin:40px auto;padding:20px;border-radius:12px;color:#fff}
.input-group input{background:#333;border:none;color:#fff}
.btn-login,.btn-register{background:gold;border:none;width:100%;padding:10px;border-radius:6px;font-weight:bold;margin-top:10px}

header{background:#fff}
.hero{height:50vh;background:#222;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#fff;text-align:center}
.hero .btn{background:#ffc107;padding:10px 25px;border-radius:25px;font-weight:bold}

.menu-section{background:#fff;padding:30px 15px;text-align:center}
.menu-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;max-width:1000px;margin:auto}
.menu-item{background:#fafafa;padding:12px;border-radius:12px;box-shadow:0 3px 8px rgba(0,0,0,.1)}
.menu-item img{width:100%;height:160px;object-fit:cover;border-radius:10px}
.btn-beli{background:var(--wa);color:#fff;border:none;padding:10px;width:100%;border-radius:8px;font-weight:bold}

.wa-float{position:fixed;right:18px;bottom:18px;width:56px;height:56px;border-radius:50%;background:var(--wa);display:flex;align-items:center;justify-content:center}
.wa-float img{width:34px}
</style>
</head>

<body>

<!-- LOGIN -->
<section id="loginSection">
  <div class="box-area">
    <h3 class="text-center">Login</h3>
    <input id="loginUsername" class="form-control mb-2" placeholder="Nama">
    <input id="loginPassword" type="password" class="form-control" placeholder="Password">
    <button class="btn-login" onclick="login()">Login</button>
    <div class="text-center mt-2">
      Belum punya akun?
      <span style="color:gold;cursor:pointer" onclick="showRegister()">Daftar</span>
    </div>
  </div>
</section>

<!-- REGISTER -->
<section id="registerSection" class="hidden">
  <div class="box-area">
    <h3 class="text-center">Register</h3>
    <input id="registerUsername" class="form-control mb-2" placeholder="Nama">
    <input id="registerPassword" type="password" class="form-control" placeholder="Password">
    <button class="btn-register" onclick="register()">Simpan</button>
    <div class="text-center mt-2">
      Sudah punya akun?
      <span style="color:gold;cursor:pointer" onclick="showLogin()">Login</span>
    </div>
  </div>
</section>

<!-- BERANDA -->
<section id="berandaSection" class="hidden">
<header class="p-3 bg-dark text-white d-flex justify-content-between">
  <span>TOMZ FOOD</span>
  <button class="btn btn-warning" onclick="logout()">Logout</button>
</header>

<div class="hero">
  <h1>Selamat Datang</h1>
  <p>Makanan enak setiap hari</p>
  <button class="btn" onclick="goMenu()">Lihat Menu</button>
</div>
</section>

<!-- MENU -->
<section id="menuSection" class="hidden">
<div class="menu-section">
  <h2>Menu</h2>
  <input id="searchInput" class="form-control mb-3" placeholder="Cari menu..." oninput="renderMenu()">
<div id="menuContainer" class="menu-container"></div>
  <button class="btn btn-primary mt-3" onclick="goAddMenu()">Tambah Menu</button>
  <button class="btn btn-secondary mt-2" onclick="goBeranda()">Kembali</button>

</div>
</section>

<!-- ADD MENU -->
<section id="addMenuSection" class="hidden">
<div class="menu-section">
  <h2>Tambah Menu</h2>
  <input id="newMenuName" class="form-control mb-2" placeholder="Nama menu">
  <input id="newMenuPrice" type="number" class="form-control mb-2" placeholder="Harga">
  <input id="newMenuImage" class="form-control mb-3" placeholder="URL gambar">
  <button class="btn btn-success w-100" onclick="saveMenu()">Simpan Menu</button>
  <button class="btn btn-secondary w-100 mt-2" onclick="goMenu()">Kembali</button>
</div>
</section>

<!-- WA FLOAT -->
<div class="wa-float" onclick="window.open('https://wa.me/62895343287264')">
  <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg">
</div>

<script>
const loginSection=document.getElementById('loginSection');
const registerSection=document.getElementById('registerSection');
const berandaSection=document.getElementById('berandaSection');
const menuSection=document.getElementById('menuSection');
const addMenuSection=document.getElementById('addMenuSection');
const menuContainer=document.getElementById('menuContainer');

function hideAll(){
  [loginSection,registerSection,berandaSection,menuSection,addMenuSection].forEach(s=>s.classList.add('hidden'));
}

function showLogin(){hideAll();loginSection.classList.remove('hidden')}
function showRegister(){hideAll();registerSection.classList.remove('hidden')}
function goBeranda(){hideAll();berandaSection.classList.remove('hidden')}
function goMenu(){hideAll();menuSection.classList.remove('hidden');renderMenu()}
function goAddMenu(){hideAll();addMenuSection.classList.remove('hidden')}

function register(){
  localStorage.setItem('user',JSON.stringify({
    u:registerUsername.value,
    p:registerPassword.value
  }));
  alert('Akun dibuat');
  showLogin();
}

function login(){
  const u=JSON.parse(localStorage.getItem('user')||'{}');
  if(loginUsername.value===u.u && loginPassword.value===u.p){
    localStorage.setItem('login',1);
    goBeranda();
  } else alert('Login gagal');
}

function logout(){
  localStorage.removeItem('login');
  showLogin();
}

const defaultMenus=[
 {nama:'Martabak Mini',harga:3000,gambar:'https://vui.unsplash.com/resize?height=256&quality=60&type=auto&url=https%3A%2F%2Fsearched-images.s3.us-west-2.amazonaws.com%2Fa06980b7-3625-4f35-b896-a8e009a3e3f4%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Credential%3DAKIAQ4GRIA4QQ7L7GEOH%252F20251210%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20251210T045112Z%26X-Amz-Expires%3D86400%26X-Amz-SignedHeaders%3Dhost%26X-Amz-Signature%3D7f2d989678e37962d56250d8ffeedfdedc57f79635f1d3df6637f0f036f7f95f&sign=GOxBIQBovr330eyp4JnrVx3MJn4M3gbPUapy_JnFyI8'},
 {nama:'Pisang Coklat',harga:3000,gambar:'https://vui.unsplash.com/resize?height=256&quality=60&type=auto&url=https%3A%2F%2Fsearched-images.s3.us-west-2.amazonaws.com%2F603decc8-9234-47f0-ad8f-0041ba2552e8%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Credential%3DAKIAQ4GRIA4QQ7L7GEOH%252F20251210%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20251210T045225Z%26X-Amz-Expires%3D86400%26X-Amz-SignedHeaders%3Dhost%26X-Amz-Signature%3Dae95496a412e8d98785ac4ebb88540141e85d6465d202677c6bc9a3fbf328065&sign=EL5BgLc3U5XzBBzefAUDCGlvd-UGLs8gafY9H-0eiIo'}
];

function getExtra(){return JSON.parse(localStorage.getItem('extraMenus')||'[]')}

function renderMenu(){
  menuContainer.innerHTML='';

  const keyword = document.getElementById('searchInput').value.toLowerCase();
  const menus = [...defaultMenus, ...getExtra()];

  menus
  .filter(m => m.nama.toLowerCase().includes(keyword))
  .forEach((m,i)=>{
    const d=document.createElement('div');
    d.className='menu-item';
    d.innerHTML=`
      <img src="${m.gambar}">
      <h5>${m.nama}</h5>
      <p>Rp${m.harga.toLocaleString('id-ID')}</p>
      <button class="btn-beli" onclick="order('${m.nama}',${m.harga})">ORDER</button>
      ${i>=defaultMenus.length?`<button class="btn btn-danger mt-2" onclick="hapus(${i-defaultMenus.length})">HAPUS</button>`:''}
    `;
    menuContainer.appendChild(d);
  });
}


function saveMenu(){
  const e=getExtra();
  e.push({
    nama:newMenuName.value,
    harga:Number(newMenuPrice.value),
    gambar:newMenuImage.value||'https://via.placeholder.com/400'
  });
  localStorage.setItem('extraMenus',JSON.stringify(e));
  alert('Menu disimpan');
  goMenu();
}

function hapus(i){
  const e=getExtra();
  e.splice(i,1);
  localStorage.setItem('extraMenus',JSON.stringify(e));
  renderMenu();
}

function order(n,h){
  window.open(`https://wa.me/62895343287264?text=Pesan ${n} Rp${h}`);
}

if(localStorage.getItem('login')) goBeranda(); else showLogin();
</script>

</body>
</html>
